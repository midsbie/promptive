#+TITLE: promptive
#+AUTHOR: Miguel Guedes <miguel@softgeist.com>
#+DATE: 24/08/2025
#+OPTIONS: toc:2 num:nil ^:nil

* Overview
The promptive extension is a powerful Firefox add-on that helps you manage and quickly access frequently used text snippets, templates, and prompts. Whether you're writing emails, coding, taking notes, or filling out forms, this extension puts your most-used text at your fingertips.

** Features
- No more losing track of your best ideas, your prompts stay in one place
- Stop retyping the same things, summon your prompt with a shortcut
- Search your library easily with tags
- See which prompts you actually use most
- Works entirely offline, your data never leaves Firefox
- Open prompts from the sidebar, right-click menu, or a hotkey

* Getting Started

** Installation

*** From Source
1. Clone this repository
2. Run =make= in the repository's root directory (installs dependencies and builds the extension)
3. Open Firefox and navigate to =about:debugging=
4. Click "This Firefox" in the left sidebar
5. Click "Load Temporary Add-on"
6. Select the =manifest.json= file from the =dist/= directory

*** From Mozilla Add-on Store
1. Open Firefox and go to the [promptive Add-ons page](https://addons.mozilla.org/en-GB/firefox/addon/promptive)
2. Click *"Add to Firefox"*
3. Confirm installation when prompted
4. The promptive icon will appear in your toolbar

** First Run
When you first install the extension, it comes with three example prompts to help you understand how it works:
- Polite Follow-Up Email
- Code Review Request
- Meeting Notes template

You can edit or delete these examples and add your own prompts.

* Using the Extension

** Supported Websites
The extension works on specific websites where text insertion is commonly needed. For the complete and current list of supported sites, see the =content_scripts.matches= field in [[file:src/manifest.json][src/manifest.json]].

On unsupported sites, you can still copy prompts to your clipboard via the sidebar or context menu.

** Accessing Your Prompts
There are *three ways* to access your prompt library:

*** 1. Sidebar Panel
- Open the sidebar
  - From Firefox's Sidebar menu: View -> Sidebar -> promptive
  - From Context Menu: Right-Click -> promptive -> Manage Prompts...
- The sidebar opens with your complete prompt library
- Full management capabilities (add, edit, delete, search)

*** 2. Keyboard Shortcut (Quick Selector)
- Press =Alt+Shift+P= anywhere on a **supported** webpage
- A centered popup appears with a search box
- Start typing to filter prompts
- Use arrow keys to navigate, Enter to select
- Selected prompt is inserted, with fallback to clipboard if insertion isn’t possible)

*** 3. Context Menu (Right-Click)
- Right-click anywhere on a supported webpage
- Choose "promptive" from the menu
- Your most recently used prompts are shown (the number and sort order are configurable).
- If more exist, select "More..." to open the quick selector
- "Manage Prompts..." opens the sidebar
- On selection:
  - If the currently focused element is editable, the prompt is inserted at the caret
  - Otherwise, the prompt is copied to your clipboard
  - In either case, a toast notification is shown

** Extension Status
The toolbar button displays the extension's status on the current page:
- Click the extension icon in the Firefox toolbar
- Shows whether promptive is active and supported on the current page

** Creating a New Prompt
1. Open the sidebar
2. Click the *"+ Add"* button
3. Fill in the prompt details:
   - *Title*: A memorable name for your prompt
   - *Content*: The actual text to be inserted
   - *Tags*: Comma-separated keywords for organization (optional)
4. Click *"Save"*

** Using a Prompt

*** Method 1: Direct Insertion
1. Click in any text field on a webpage
2. Press =Alt+Shift+P= or right-click -> "promptive"
3. Select your prompt
4. Text is automatically inserted (if supported); otherwise copied to clipboard

*** Method 2: Copy to Clipboard
1. Open the sidebar
2. Find your prompt
3. Click the *"Use"* button
4. The prompt is copied to your clipboard
5. Paste (Ctrl+V) wherever needed

** Searching for Prompts
The extension includes *fuzzy search* that matches against:
- Prompt titles
- Prompt content
- Associated tags

*** In the Sidebar
- Use the search box at the top
- Results update as you type
- Clear the search to see all prompts

*** In the Quick Selector (Alt+Shift+P)
- The search box is auto-focused
- Type any part of the title, content, or tags
- Matching prompts appear instantly

** Managing Your Library

*** Editing a Prompt
1. Open the sidebar
2. Click *"Edit"* on any prompt
3. Modify the title, content, or tags
4. Click *"Save"* to update

*** Deleting a Prompt
1. Open the sidebar
2. Click *"Delete"* on any prompt
3. Confirm the deletion

*** Viewing Usage Statistics
Each prompt displays:
- *Used*: Total number of times used
- *Last*: Date of most recent use

* Import and Export

** Exporting Your Prompts
1. Open the sidebar
2. Click the *"Export"* button
3. Your prompts are downloaded as a JSON file
4. File is named: =prompts-YYYY-MM-DD.json=

Use this feature to:
- Create backups of your prompt library
- Share prompts with colleagues
- Transfer prompts to another computer

** Importing Prompts
1. Open the sidebar
2. Click the *"Import"* button
3. Select a JSON file to import
4. Prompts are merged with your existing library

*** Import Behavior
- *Duplicate detection*: Based on exact title + content match
- *New prompts*: Added to your library
- *Existing prompts*: Updated only if the imported version is newer
- *Tags merged*: Combines tags from both versions

** Import/Export Format
The JSON structure for import/export:
#+BEGIN_SRC json
{
  "version": 1,
  "exported_at": "2024-01-15T10:30:00.000Z",
  "prompts": [
    {
      "title": "Example Prompt",
      "content": "This is the prompt content",
      "tags": ["tag1", "tag2"],
      "created_at": "2024-01-01T00:00:00.000Z",
      "updated_at": "2024-01-10T00:00:00.000Z",
      "last_used_at": "2024-01-14T00:00:00.000Z",
      "used_times": 5
    }
  ]
}
#+END_SRC

* Configuration and Shortcuts
You can customize promptive's behavior by visiting the extension's preferences page.

1. Right-click the extension icon in your browser's toolbar.
2. Select "Manage Extension".
3. On the page that opens, find and click on the "Preferences" tab or section.

*** Available Settings
- *Keyboard Shortcut*: Change the hotkey used to open the Quick Selector popup.
- *Context Menu Limit*: Set the maximum number of prompts to display in the right-click context menu.
- *Context Menu Sort Order*: Choose how prompts are sorted in the context menu, either by most recently used or alphabetically.

*** Default Shortcuts
The following shortcuts are available during general use:

| Shortcut         | Action                    | Context                |
|------------------+---------------------------+------------------------|
| =Alt+Shift+P=    | Open quick selector       | Any supported webpage  |
| =↑/↓= Arrow Keys | Navigate prompts          | Quick selector         |
| =Enter=          | Select highlighted prompt | Quick selector         |
| =Escape=         | Close popup/modal         | Quick selector, modals |
| =Tab/Shift+Tab=  | Navigate UI elements      | Sidebar, modals        |

* Privacy and Data
All prompts are stored locally in your browser and also synced via Firefox Sync if you have it enabled. No third-party servers or telemetry are involved. Your data persists across sessions and is removed if the extension is uninstalled.

To keep your library safe, you may still wish to export prompts as JSON, maintain backups in a secure location, and optionally use version control.

* Ecosystem
promptive is a Firefox extension that can act as a sink: it receives insert jobs from promptivd and inserts text into supported pages.

| Role   | Project    | What it does                                 |
|--------+------------+----------------------------------------------|
| Daemon | [[https://github.com/midsbie/promptivd][promptivd]]  | Relays insert jobs to a live sink            |
| Sink   | [[https://github.com/midsbie/promptive][promptive]]  | Firefox extension acting as a WebSocket sink |
| Client | [[https://github.com/midsbie/promptivel][promptivel]] | Emacs client that submits text to promptivd  |

* License
Distributed under the MIT License. See LICENSE for more information.
